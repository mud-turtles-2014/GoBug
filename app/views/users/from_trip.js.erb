$("#expenses_grid").html("<%= escape_javascript(render partial: 'expenses_list', locals: { expenses: @selected, wishlist: false } ) %>").html_safe;

$('#expense_currency_id').select2();

  $('body').on('change','#expense_currency_id',function(e){
    currency_exchange();
    });

   $('body').on('focusout','#expense_cost',function(e){
   currency_exchange();
    });



    var old_budget = parseFloat($('h5 .best_in_place[data-bip-attribute="budget"]').text().replace(/[A-Za-z$-,]/g, ""))
    var balance = parseFloat($('#balance-field').text().replace(/[A-Za-z$-,]/g, ""))

    $('h5 .best_in_place[data-bip-attribute="budget"]').change(function(e){
      new_budget = (e.target.value) * 1
      var total_spent = old_budget - balance;
      var new_balance = (new_budget - total_spent).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')
      $('#balance-field').text('$' + new_balance)
      var formatted = new_budget.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')
      $('h5 .best_in_place[data-bip-attribute="budget"]').text('$' + formatted)
    })

